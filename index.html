<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Communication PHP-Python</title>
</head>
<body>

    <h1>Communication PHP-Python</h1>

    <?php
        // Définir une variable PHP
        $message_from_php = "Bonjour depuis PHP!";
    ?>

    <!-- Utiliser JavaScript pour envoyer la variable à Python -->
    <script>
        var messageFromPHP = "<?php echo $message_from_php; ?>";
        // Déclaration de la variable
        var maVariable = 0;

        // Utiliser XMLHttpRequest pour envoyer la variable à un script Python
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://127.0.0.1:5000/", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.send("message=" + messageFromPHP);

        // Afficher la réponse de Python
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                console.log("Réponse de Python : " + xhr.responseText);
            }
        };
        // Fonction pour changer la variable
        function changerVariable(nouvelleValeur) {
            maVariable = nouvelleValeur;
            // Mise à jour du texte dans la balise avec l'id "affichageVariable"
            document.getElementById("affichageVariable").innerText = "Ma variable : " + maVariable;
            console.log("Variable changée à : " + maVariable);
        }
    </script>

    <h1>Test changement de variable</h1>

    <!-- Boutons pour changer la variable -->
    <button onclick="changerVariable(1)">Changer à 1</button>
    <button onclick="changerVariable(2)">Changer à 2</button>
    <button onclick="changerVariable(3)">Changer à 3</button>

    
    <!-- Affichage de la variable -->
    <p id="affichageVariable">Ma variable : 0</p>
    <a href="page2.html"> page2 </a>

</body>
</html>
